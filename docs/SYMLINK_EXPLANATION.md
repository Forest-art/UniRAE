# å…³äºé…ç½®æ–‡ä»¶ç¬¦å·é“¾æ¥çš„è¯´æ˜

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¬¦å·é“¾æ¥ï¼Ÿ

ä½ å¯èƒ½æ³¨æ„åˆ° `configs/experiment/` å’Œ `configs/model/` ä¸­çš„æ–‡ä»¶çœ‹èµ·æ¥å’Œ `stage1/`ã€`stage2/` ç›®å½•ä¸­çš„æ–‡ä»¶"é‡å¤"äº†ã€‚ä½†å®é™…ä¸Šï¼Œ**è¿™äº›æ˜¯ç¬¦å·é“¾æ¥ï¼ˆsymbolic linksï¼‰ï¼Œä¸æ˜¯é‡å¤çš„æ–‡ä»¶**ã€‚

## ä»€ä¹ˆæ˜¯ç¬¦å·é“¾æ¥ï¼Ÿ

ç¬¦å·é“¾æ¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ç±»å‹ï¼Œå®ƒæŒ‡å‘å¦ä¸€ä¸ªæ–‡ä»¶ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º"å¿«æ·æ–¹å¼"æˆ–"åˆ«å"ã€‚

## å½“å‰ç»“æ„è¯´æ˜

```
configs/
â”œâ”€â”€ stage1/                    # çœŸå®çš„æ–‡ä»¶åœ¨è¿™é‡Œ
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ rae.yaml          # å®é™…æ–‡ä»¶ âœ…
â”‚   â”‚   â””â”€â”€ rae_siglip.yaml   # å®é™…æ–‡ä»¶ âœ…
â”‚   â””â”€â”€ experiments/
â”‚       â”œâ”€â”€ rae_dino.yaml     # å®é™…æ–‡ä»¶ âœ…
â”‚       â””â”€â”€ rae_dummy.yaml    # å®é™…æ–‡ä»¶ âœ…
â”‚
â”œâ”€â”€ stage2/                    # çœŸå®çš„æ–‡ä»¶åœ¨è¿™é‡Œ
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ dit.yaml          # å®é™…æ–‡ä»¶ âœ…
â”‚   â””â”€â”€ experiments/
â”‚       â”œâ”€â”€ dit_dino.yaml     # å®é™…æ–‡ä»¶ âœ…
â”‚       â””â”€â”€ dit_dummy.yaml    # å®é™…æ–‡ä»¶ âœ…
â”‚
â”œâ”€â”€ experiment/                # è¿™äº›æ˜¯ç¬¦å·é“¾æ¥ ğŸ”—
â”‚   â”œâ”€â”€ rae_dino.yaml -> ../stage1/experiments/rae_dino.yaml  # ç¬¦å·é“¾æ¥
â”‚   â””â”€â”€ dit_dino.yaml -> ../stage2/experiments/dit_dino.yaml   # ç¬¦å·é“¾æ¥
â”‚
â””â”€â”€ model/                     # è¿™äº›æ˜¯ç¬¦å·é“¾æ¥ ğŸ”—
    â”œâ”€â”€ rae.yaml -> ../stage1/models/rae.yaml      # ç¬¦å·é“¾æ¥
    â””â”€â”€ dit.yaml -> ../stage2/models/dit.yaml     # ç¬¦å·é“¾æ¥
```

## å¦‚ä½•è¯†åˆ«ç¬¦å·é“¾æ¥ï¼Ÿ

åœ¨ Linux/Mac ç»ˆç«¯ä¸­ï¼Œä½¿ç”¨ `ls -la` å‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼š

```bash
$ ls -la configs/experiment/

# ç¬¦å·é“¾æ¥æ˜¾ç¤ºä¸ºï¼š
lrwxrwxrwx 1 root root 35 Feb 9 22:28 rae_dino.yaml -> ../stage1/experiments/rae_dino.yaml
#         ^^^^                                                                 ^^^^^^^^^^^^^^^^^^^^^^^^
#         é“¾æ¥æ ‡è®°                                                           æŒ‡å‘çš„çœŸå®æ–‡ä»¶

# å®é™…æ–‡ä»¶æ˜¾ç¤ºä¸ºï¼š
-rw-r--r-- 1 root root 714 Feb 7 12:43 example.yaml
#         ^^^^^^^^^^^^                                 ^
#         æ™®é€šæ–‡ä»¶æ ‡è®°                                æ–‡ä»¶å¤§å°
```

## ä¼˜ç‚¹

ä½¿ç”¨ç¬¦å·é“¾æ¥è€Œä¸æ˜¯å¤åˆ¶æ–‡ä»¶æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

1. **æ²¡æœ‰é‡å¤**ï¼šåªæœ‰ä¸€ä¸ªçœŸå®æ–‡ä»¶ï¼Œä¸ä¼šæµªè´¹ç£ç›˜ç©ºé—´
2. **è‡ªåŠ¨åŒæ­¥**ï¼šä¿®æ”¹çœŸå®æ–‡ä»¶ï¼Œç¬¦å·é“¾æ¥è‡ªåŠ¨åæ˜ æ›´æ”¹
3. **æ˜“äºç»´æŠ¤**ï¼šä¸éœ€è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªç›¸åŒçš„æ–‡ä»¶
4. **å‘åå…¼å®¹**ï¼šæ—§å‘½ä»¤ï¼ˆå¦‚ `experiment=rae_dino`ï¼‰ä»ç„¶æœ‰æ•ˆ

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ 1ï¼šä½¿ç”¨ç®€çŸ­è·¯å¾„ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ experiment/ ä¸­çš„ç¬¦å·é“¾æ¥
python src/train.py experiment=rae_dino
python src/train.py experiment=dit_dino

# ä½¿ç”¨ model/ ä¸­çš„ç¬¦å·é“¾æ¥ï¼ˆç›´æ¥æŒ‡å®šæ¨¡å‹æ—¶ï¼‰
python src/train.py model=rae
```

### æ–¹å¼ 2ï¼šä½¿ç”¨å®Œæ•´è·¯å¾„

```bash
# ç›´æ¥ä½¿ç”¨ stage1/experiments/ ä¸­çš„çœŸå®æ–‡ä»¶
python src/train.py experiment=stage1/experiments/rae_dino

# ç›´æ¥ä½¿ç”¨ stage2/experiments/ ä¸­çš„çœŸå®æ–‡ä»¶
python src.train.py experiment=stage2/experiments/dit_dino
```

## ä¿®æ”¹é…ç½®æ–‡ä»¶

**é‡è¦**ï¼šå¦‚æœä½ æƒ³ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè¯·ç¼–è¾‘**çœŸå®çš„æ–‡ä»¶**ï¼Œè€Œä¸æ˜¯ç¬¦å·é“¾æ¥ï¼š

```bash
# âœ… æ­£ç¡®ï¼šç¼–è¾‘çœŸå®æ–‡ä»¶
vim configs/stage1/experiments/rae_dino.yaml
vim configs/stage2/experiments/dit_dino.yaml

# âš ï¸ ä¸æ¨èï¼šç¼–è¾‘ç¬¦å·é“¾æ¥ï¼ˆè™½ç„¶ä¹Ÿèƒ½å·¥ä½œï¼‰
vim configs/experiment/rae_dino.yaml
```

## æ£€æŸ¥æ–‡ä»¶ç±»å‹

å¦‚æœä½ æƒ³ç¡®è®¤ä¸€ä¸ªæ–‡ä»¶æ˜¯ç¬¦å·é“¾æ¥è¿˜æ˜¯çœŸå®æ–‡ä»¶ï¼š

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨ ls -l
ls -l configs/experiment/rae_dino.yaml
# è¾“å‡ºï¼šlrwxrwxrwx ... rae_dino.yaml -> ../stage1/experiments/rae_dino.yaml

# æ–¹æ³• 2ï¼šä½¿ç”¨ file å‘½ä»¤
file configs/experiment/rae_dino.yaml
# è¾“å‡ºï¼šconfigs/experiment/rae_dino.yaml: symbolic link to ../stage1/experiments/rae_dino.yaml

# æ–¹æ³• 3ï¼šä½¿ç”¨ readlink
readlink configs/experiment/rae_dino.yaml
# è¾“å‡ºï¼š../stage1/experiments/rae_dino.yaml
```

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠæ‰€æœ‰æ–‡ä»¶æ”¾åœ¨ experiment/ ç›®å½•ä¸‹ï¼Ÿ

A: ä¸ºäº†æ¸…æ™°çš„ç»„ç»‡ç»“æ„ï¼š
- `stage1/` åŒ…å« Stage 1 (RAE) çš„æ‰€æœ‰é…ç½®
- `stage2/` åŒ…å« Stage 2 (DiT) çš„æ‰€æœ‰é…ç½®
- `experiment/` å’Œ `model/` é€šè¿‡ç¬¦å·é“¾æ¥æä¾›å‘åå…¼å®¹çš„è®¿é—®æ–¹å¼

### Q: ç¬¦å·é“¾æ¥ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ

A: ä¸ä¼šã€‚ç¬¦å·é“¾æ¥çš„å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡ï¼ŒHydra ä¼šç«‹å³è§£æå®ƒä»¬æŒ‡å‘çš„çœŸå®æ–‡ä»¶ã€‚

### Q: æˆ‘å¯ä»¥åˆ é™¤ç¬¦å·é“¾æ¥å—ï¼Ÿ

A: å¯ä»¥ï¼Œä½†ä¼šå¯¼è‡´å‘åå…¼å®¹é—®é¢˜ã€‚å»ºè®®ä¿ç•™ç¬¦å·é“¾æ¥ï¼Œè¿™æ ·æ—§çš„å‘½ä»¤å’Œæ–‡æ¡£ä»ç„¶æœ‰æ•ˆã€‚

### Q: å¦‚ä½•åˆ›å»ºæ–°çš„ç¬¦å·é“¾æ¥ï¼Ÿ

A: ä½¿ç”¨ `ln -s` å‘½ä»¤ï¼š

```bash
# æ ¼å¼ï¼šln -s ç›®æ ‡æ–‡ä»¶ é“¾æ¥åç§°
ln -s ../stage1/experiments/my_experiment.yaml configs/experiment/my_experiment.yaml
```

## æ€»ç»“

- âœ… `configs/experiment/` å’Œ `configs/model/` ä¸­çš„æ–‡ä»¶æ˜¯**ç¬¦å·é“¾æ¥**ï¼Œä¸æ˜¯é‡å¤æ–‡ä»¶
- âœ… çœŸå®æ–‡ä»¶åœ¨ `configs/stage1/` å’Œ `configs/stage2/` ç›®å½•ä¸­
- âœ… ä½¿ç”¨ç¬¦å·é“¾æ¥æä¾›å‘åå…¼å®¹ï¼ŒåŒæ—¶ä¿æŒæ¸…æ™°çš„ç›®å½•ç»“æ„
- âœ… ä¿®æ”¹é…ç½®æ—¶ï¼Œç¼–è¾‘çœŸå®æ–‡ä»¶ï¼ˆstage1/æˆ–stage2/ä¸­çš„æ–‡ä»¶ï¼‰

å¦‚æœä½ è§‰å¾—è¿™ç§ç»“æ„ä»¤äººå›°æƒ‘ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ï¼š
1. åªä½¿ç”¨ `stage1/` å’Œ `stage2/` ç›®å½•ä¸­çš„å®Œæ•´è·¯å¾„
2. åˆ é™¤ç¬¦å·é“¾æ¥ï¼Œä½†è¿™ä¼šå½±å“å‘åå…¼å®¹æ€§