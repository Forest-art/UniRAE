# @package _global_
# RAE training with dummy dataset for testing and debugging
defaults:
  - override /data: imagenet
  - override /model: rae
  - override /callbacks: no_checkpoint
  - override /trainer: default

tags: ["rae", "dummy_test"]

# Data settings for dummy dataset
data:
  data_dir: data/dummy_dataset_hf
  use_hf_dataset: true
  hf_split: train
  hf_validation_split: validation
  image_size: 256
  batch_size: 8  # Small batch size for dummy data
  num_workers: 2
  pin_memory: false
  train_split: 1.0  # Use all train split data (validation is separate split)

# Model settings
model:
  optimizer:
    lr: 2e-4

# Callback settings (inheriting from configs/callbacks/no_checkpoint.yaml)
callbacks:
  rfid:
    rfid_every_n_steps: 20  # Evaluate every 20 steps for testing
    use_full_validation_set: true  # Use entire validation set for rFID evaluation
    rfid_save_samples: false  # Don't save sample images (online evaluation only)

# Trainer settings
trainer:
  max_epochs: 2
  precision: 16
  accelerator: auto
  devices: auto
  limit_train_batches: 0.1  # Use only 10% of data for quick testing
  limit_val_batches: 0.5   # Use 50% of validation data
  log_every_n_steps: 5
  deterministic: false
  accumulate_grad_batches: 1
  enable_checkpointing: false  # Disable checkpointing to save disk space

# Disable test for quick testing
test: false